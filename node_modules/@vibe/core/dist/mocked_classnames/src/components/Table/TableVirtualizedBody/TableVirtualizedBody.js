import{defineProperty as e}from"../../../../_virtual/_rollupPluginBabelHelpers.js";import{__rest as t}from"../../../../_virtual/_tslib.js";import r,{forwardRef as o,useCallback as n,useEffect as i}from"react";import l from"../TableBody/TableBody.js";import s from"./TableVirtualizedBody.module.scss.js";import{FixedSizeList as a}from"react-window";import{useTable as c}from"../context/TableContext/TableContext.js";import m from"classnames";import{getTestId as u}from"../../../tests/testIds.js";import{ComponentDefaultTestId as d}from"../../../tests/constants.js";import{RowHeights as f}from"../Table/TableConsts.js";import p from"react-virtualized-auto-sizer";import{useTableRowMenu as v}from"../context/TableRowMenuContext/TableRowMenuContext.js";var b=o((function(b,h){var T=b.items,g=b.rowRenderer,j=b.onScroll,w=b.columns,y=b.headerRenderer,E=b.id,R=b.className,x=b["data-testid"],z=c(),B=z.size,C=z.virtualizedListRef,L=z.onVirtualizedListScroll,_=z.markTableAsVirtualized,O=v().resetHoveredRow,S=!!w&&!!y,V=n((function(e){var t=e.target;O(),L({target:t,currentTarget:t})}),[O,L]);i((function(){var e=C.current;if(e)return e.addEventListener("scroll",V),function(){e.removeEventListener("scroll",V)}}),[V,C]);var A=n((function(e){S||null==j||j(e.scrollDirection,e.scrollOffset,e.scrollUpdateWasRequested)}),[j,S]),D=n((function(e){var o,n=e.index,i=e.style,l=t(i,["width"]);if(S&&0===n)return null;var s=g(T[S?n-1:n]);return r.cloneElement(s,{style:Object.assign(Object.assign({},l),null===(o=s.props)||void 0===o?void 0:o.style),key:n})}),[T,g,S]);return i((function(){S||_()}),[_,S]),r.createElement(l,{className:m(s.tableBody,e({},s.withHeader,S),R),id:E,"data-testid":x||u(d.TABLE_VIRTUALIZED_BODY,E),ref:h},(null==T?void 0:T.length)&&r.createElement(p,null,(function(e){return r.createElement(a,{itemSize:f[B],height:e.height,itemCount:S?T.length+1:T.length,width:e.width,onScroll:A,outerRef:function(e){C.current=e},innerElementType:S?o((function(e,o){var n=e.children,i=t(e,["children"]);return r.createElement("div",Object.assign({ref:o},i),y(w),n)})):void 0},D)})))}));export{b as default};
//# sourceMappingURL=TableVirtualizedBody.js.map
