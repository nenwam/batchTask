import{slicedToArray as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import e from"classnames";import r,{forwardRef as s,useRef as i,useState as o,useCallback as a,useMemo as n}from"react";import l from"../../hooks/useMergeRef.js";import m from"../../hooks/useKeyEvent/index.js";import{VirtualizedListItems as c}from"./VirtualizedListItems/VirtualizedListItems.js";import{keyCodes as u,UP_DOWN_ARROWS as d}from"../../constants/keyCodes.js";import{withStaticProps as p}from"../../types/withStaticProps.js";import"../../utils/colors-vars-map.js";import{ListWrapperComponentType as f}from"./ListConstants.js";import{getTestId as v,ComponentDefaultTestId as y}from"../../tests/testIds.js";import{ListContext as b}from"./utils/ListContext.js";import{useListId as j,getListItemIndexById as L,getNextListItemIndex as I,getPrevListItemIndex as h,getListItemIdByIndex as k,getListItemComponentType as x}from"./utils/ListUtils.js";import A from"./List.module.scss.js";var E=s((function(s,p){var f=s.className,R=s.id,g=s.component,C=void 0===g?E.components.UL:g,O=s.children,P=s.ariaLabel,V=s.ariaDescribedBy,_=s["aria-controls"],D=s.renderOnlyVisibleItems,N=void 0!==D&&D,U=s.style,W=s["data-testid"],z=i(null),B=l(p,z),S=i([]),T=j(R),w=o(0),F=t(w,2),H=F[0],K=F[1],M=C,q=a((function(t){var e;K(L(S,t)),null===(e=null==z?void 0:z.current)||void 0===e||e.setAttribute("aria-activedescendant",t)}),[]),G=a((function(t){if(!N){t.preventDefault();var e=t.key===u.UP_ARROW,r=void 0;t.key===u.DOWN_ARROW&&S.current.length>H+1?r=I(H,S):e&&H>0&&(r=h(H,S)),void 0!==r&&(q(k(S,r)),S.current[r].focus())}}),[H,N,q]);m({keys:d,callback:G,ref:z});var J=n((function(){var t=Array.isArray(O)?O:[O];return N?t=r.createElement(c,null,t):(S.current=S.current.slice(0,t.length),t=r.Children.map(t,(function(t,e){if(!r.isValidElement(t))return t;var s=t.props.id||"".concat(T,"-item-").concat(e);return r.cloneElement(t,{ref:function(t){return S.current[e]=t},tabIndex:H===e?0:-1,id:s,component:x(C)})}))),t}),[O,C,H,T,N]);return r.createElement(b.Provider,{value:{updateFocusedItem:q}},r.createElement(M,{"data-testid":W||v(y.LIST,R),ref:B,style:U,className:e(A.list,f),id:T,"aria-label":P,"aria-describedby":V,"aria-controls":_,tabIndex:-1,role:"listbox"},J))})),R=p(E,{components:f});export{R as default};
//# sourceMappingURL=List.js.map
