import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import t,{forwardRef as n,useRef as r,useState as a,useEffect as l}from"react";import i from"classnames";import s from"../../hooks/useMergeRef.js";import u from"./EditableTypography.module.scss.js";import{keyCodes as c}from"../../constants/keyCodes.js";import"../../constants/sizes.js";import{useKeyboardButtonPressedFunc as d}from"../../hooks/useKeyboardButtonPressedFunc.js";import p from"../../hooks/usePrevious/index.js";var f=n((function(n,f){var m=n.id,y=n.className,h=n["data-testid"],v=n.value,g=n.onChange,b=n.onClick,E=n.readOnly,C=void 0!==E&&E,k=n.ariaLabel,j=void 0===k?"":k,P=n.placeholder,w=n.clearable,N=n.typographyClassName,B=n.component,T=n.isEditMode,x=n.onEditModeChange,D=n.tooltipProps,K=n.type,M=n.weight,R=r(null),A=s(f,R),_=a(T||!1),z=e(_,2),F=z[0],H=z[1],I=a(v),L=e(I,2),O=L[0],S=L[1],q=a(0),G=e(q,2),J=G[0],Q=G[1],U=p(v),V=r(null),W=r(null);function X(e){C||F||(e.preventDefault(),Y(!0))}function Y(e){null==x||x(e),H(e)}function Z(){(Y(!1),v!==O)&&(O||w&&P?(S(O),null==g||g(O)):S(v))}l((function(){F||v===U||v===O||S(v)}),[U,F,v,O]),l((function(){H(T)}),[T]);var $=d(X);return l((function(){var e;F&&V.current&&(null===(e=V.current)||void 0===e||e.focus())}),[F]),l((function(){if(W.current){var e=W.current.getBoundingClientRect();Q(e.width)}}),[O,F]),t.createElement("div",{ref:A,id:m,"aria-label":j,"data-testid":h,className:i(u.editableTypography,y),role:F?null:"button",onClick:function(e){null==b||b(e),X(e)},onKeyDown:$},F&&t.createElement("input",{ref:V,className:i(u.input,N),value:O,onChange:function(e){S(e.target.value)},onKeyDown:function(e){e.key===c.ENTER&&Z(),e.key===c.ESCAPE&&(Y(!1),S(v))},onBlur:function(){Z()},"aria-label":j,placeholder:P,style:{width:J},role:"input"}),t.createElement(B,{ref:W,"aria-hidden":F,className:i(u.typography,N,o(o(o({},u.hidden,F),u.disabled,C),u.placeholder,!O&&P)),tabIndex:0,tooltipProps:D,weight:M,type:K},O||P))}));export{f as default};
//# sourceMappingURL=EditableTypography.js.map
