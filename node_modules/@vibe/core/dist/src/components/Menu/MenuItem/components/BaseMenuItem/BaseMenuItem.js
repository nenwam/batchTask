import{defineProperty as e}from"../../../../../../_virtual/_rollupPluginBabelHelpers.js";import t,{forwardRef as n,useRef as o,useEffect as s,useCallback as i}from"react";import u from"../../../../Text/Text.js";import{getTestId as r,ComponentDefaultTestId as l}from"../../../../../tests/testIds.js";import m from"classnames";import{TAB_INDEX_FOCUS_WITH_JS_ONLY as a}from"../../MenuItemConstants.js";import d from"../MenuItemSubMenuIcon/MenuItemSubMenuIcon.js";import c from"../MenuItemSubMenu/MenuItemSubMenu.js";import I from"../../hooks/useMenuItemMouseEvents.js";import M from"../../hooks/useMenuItemKeyboardEvents.js";import p from"../../../../../hooks/useMergeRef.js";import v from"../../../../../hooks/useIsMouseEnter.js";import f from"./BaseMenuItem.module.scss.js";var b=n((function(n,b){var h=n.subMenu,x=n.className,S=n.menuRef,E=n.disabled,j=void 0!==E&&E,k=n.selected,C=void 0!==k&&k,B=n.onClick,O=n.activeItemIndex,g=n.setActiveItemIndex,y=n.index,A=n.id,N=n.isParentMenuVisible,P=n.resetOpenSubMenuIndex,R=n.hasOpenSubMenu,w=n.setSubMenuIsOpenByIndex,L=n.closeMenu,V=n.useDocumentEventListeners,T=void 0!==V&&V,_=n.isInitialSelectedState,D=n.onMouseEnter,F=n.onMouseLeave,H=n.shouldScrollMenu,K=n["data-testid"],U=n.splitMenuItem,q=void 0!==U&&U,z=n.children,G=n.submenuPosition,J=void 0===G?"right":G,Q=(void 0===O?-1:O)===y,W=!j&&!!h&&(void 0!==N&&N)&&(Q&&(void 0!==R&&R)),X=o(null),Y=o(null),Z=p(b,X),$=v({ref:X}),ee=v({ref:Y});s((function(){var e,t=X.current;Q&&H&&t&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded({behaviour:"smooth"}):null===(e=t.scrollIntoView)||void 0===e||e.call(t,{behavior:"smooth",block:"center"}))}),[Q,H]),s((function(){var e=X.current;T||Q&&(null==e||e.focus())}),[Q,T]);var te=I({ref:X,splitMenuItemIconButtonRef:Y,resetOpenSubMenuIndex:P,setSubMenuIsOpenByIndex:w,isActive:Q,setActiveItemIndex:g,index:y,hasChildren:!!h,splitMenuItem:q}),ne=M({onClick:B,disabled:j,isActive:Q,index:y,setActiveItemIndex:g,hasChildren:!!h,shouldShowSubMenu:W,setSubMenuIsOpenByIndex:w,menuRef:S,isMouseEnter:te,closeMenu:L,useDocumentEventListeners:T,splitMenuItem:q,isMouseEnterMenuItem:$,isMouseEnterIconButton:ee}).onClickCallback,oe=i((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(y,!1),e.propagate&&L(e)}),[w,y,L]);return t.createElement(u,{id:A,element:"li",type:"text2","aria-haspopup":!!h||void 0,"aria-expanded":h?W:void 0,"data-testid":K||r(l.MENU_ITEM,y),className:m(f.item,x,e(e(e(e(e({},f.disabled,j),f.focused,Q),f.selected,C),f.initialSelected,_),f.splitMenuItem,q)),ref:Z,onClick:ne,role:"menuitem","aria-current":Q,onMouseLeave:F,onMouseEnter:D,tabIndex:a},z,!!h&&t.createElement(t.Fragment,null,t.createElement(d,{ref:Y,isSplit:q,active:W,disabled:j}),t.createElement(c,{anchorRef:X,open:W,onClose:oe,autoFocusOnMount:!T,submenuPosition:J},h)))}));export{b as default};
//# sourceMappingURL=BaseMenuItem.js.map
