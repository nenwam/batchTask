{"ast":null,"code":"import _slicedToArray from\"/home/nenwam/Documents/rallyessentials/batchtask/quickstart-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{TextField,Button,Label,Dropdown}from\"monday-ui-react-core\";import mondaySdk from\"monday-sdk-js\";import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var monday=mondaySdk();monday.setToken(\"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI3Mjk5MDQ5NiwiYWFpIjoxMSwidWlkIjozNjI5NTI0NywiaWFkIjoiMjAyMy0wOC0wM1QyMToyMjozNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTI3MTA0ODYsInJnbiI6InVzZTEifQ.XIrSWOWgg3U7oRd9zrKzL0WAr8Peo5b4ZIU1vfw0T2w\");var ListInput=function ListInput(_ref){var nameHandler=_ref.nameHandler,countHandler=_ref.countHandler,totalCount=_ref.totalCount,dropdownHandler=_ref.dropdownHandler,clickFunction=_ref.clickFunction;var _useState=useState(),_useState2=_slicedToArray(_useState,2),context=_useState2[0],setContext=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),colOptions=_useState4[0],setColOptions=_useState4[1];useEffect(function(){var contextUnsubscribe=monday.listen(\"context\",function(res){setContext(res.data);});// Clean up the subscription when the component unmounts\nreturn function(){contextUnsubscribe&&contextUnsubscribe.unsubscribe();};},[]);useEffect(function(){// setColOptions(() => {\n//     console.log(context)\n//     console.log(\"Context: \", context)\n//     const boardId = context.boardId;\n//     const query = `query {\n//     boards(ids: ${boardId}) {\n//         columns {\n//         id\n//         title\n//         }\n//     }\n//     }`;\n//     monday.api(query).then((res) => {\n//         console.log(\"res: \", res);\n//         const columns = res.data.boards[0].columns;\n//         console.log(\"Columns: \", columns);\n//         const cols = columns.map(column => {\n//             return {label: column.title, value: column.id}\n//         })\n//         console.log(\"cols: \", cols)\n//         return cols\n//     }).catch((err) => {\n//         console.log(\"Error fetching columns: \", err);\n//     });\n// })\nif(!context)return;console.log(context);console.log(\"Context: \",context);var boardId=context.boardId;var query=\"query {\\n        boards(ids: \".concat(boardId,\") {\\n            columns {\\n            id\\n            title\\n            }\\n        }\\n        }\");monday.api(query).then(function(res){console.log(\"res: \",res);var columns=res.data.boards[0].columns;console.log(\"Columns: \",columns);var cols=columns.map(function(column){return{label:column.title,value:column.id};});console.log(\"cols: \",cols);setColOptions(cols);}).catch(function(err){console.log(\"Error fetching columns: \",err);});},[context]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Enter Batches\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Label,{text:totalCount})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Dropdown,{placeholder:\"Target column\",onChange:dropdownHandler,options:colOptions})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{onChange:nameHandler,type:\"text\",placeholder:\"Batch name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{onChange:countHandler,type:\"number\",placeholder:\"Batch count\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Button,{onClick:clickFunction,size:Button.sizes.SMALL,color:Button.colors.POSITIVE,children:\"Add\"})})]})]});};export default ListInput;","map":{"version":3,"names":["React","TextField","Button","Label","Dropdown","mondaySdk","useState","useEffect","jsx","_jsx","jsxs","_jsxs","monday","setToken","ListInput","_ref","nameHandler","countHandler","totalCount","dropdownHandler","clickFunction","_useState","_useState2","_slicedToArray","context","setContext","_useState3","_useState4","colOptions","setColOptions","contextUnsubscribe","listen","res","data","unsubscribe","console","log","boardId","query","concat","api","then","columns","boards","cols","map","column","label","title","value","id","catch","err","className","children","text","placeholder","onChange","options","type","onClick","size","sizes","SMALL","color","colors","POSITIVE"],"sources":["/home/nenwam/Documents/rallyessentials/batchtask/quickstart-react/src/modules/ListInput.js"],"sourcesContent":["import React from \"react\";\nimport { TextField, Button, Label, Dropdown } from \"monday-ui-react-core\"\nimport mondaySdk from \"monday-sdk-js\";\nimport { useState, useEffect } from \"react\";\n\nconst monday = mondaySdk();\nmonday.setToken(\"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI3Mjk5MDQ5NiwiYWFpIjoxMSwidWlkIjozNjI5NTI0NywiaWFkIjoiMjAyMy0wOC0wM1QyMToyMjozNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTI3MTA0ODYsInJnbiI6InVzZTEifQ.XIrSWOWgg3U7oRd9zrKzL0WAr8Peo5b4ZIU1vfw0T2w\");\n\nconst ListInput = ({nameHandler, countHandler, totalCount, dropdownHandler, clickFunction}) => {\n    const [context, setContext] = useState();\n    const [colOptions, setColOptions] = useState([])\n\n    useEffect(() => {\n        const contextUnsubscribe = monday.listen(\"context\", (res) => {\n          setContext(res.data);\n        });\n      \n        // Clean up the subscription when the component unmounts\n        return () => {\n          contextUnsubscribe && contextUnsubscribe.unsubscribe();\n        };\n      }, []);\n\n    useEffect(() => {\n\n        // setColOptions(() => {\n        //     console.log(context)\n\n        //     console.log(\"Context: \", context)\n        //     const boardId = context.boardId;\n            \n        //     const query = `query {\n        //     boards(ids: ${boardId}) {\n        //         columns {\n        //         id\n        //         title\n        //         }\n        //     }\n        //     }`;\n        //     monday.api(query).then((res) => {\n        //         console.log(\"res: \", res);\n        //         const columns = res.data.boards[0].columns;\n        //         console.log(\"Columns: \", columns);\n        //         const cols = columns.map(column => {\n        //             return {label: column.title, value: column.id}\n        //         })\n        //         console.log(\"cols: \", cols)\n        //         return cols\n        //     }).catch((err) => {\n        //         console.log(\"Error fetching columns: \", err);\n        //     });\n        // })\n\n        if (!context) return;\n\n\n        console.log(context)\n\n        console.log(\"Context: \", context)\n        const boardId = context.boardId;\n        \n        const query = `query {\n        boards(ids: ${boardId}) {\n            columns {\n            id\n            title\n            }\n        }\n        }`;\n        monday.api(query).then((res) => {\n            console.log(\"res: \", res);\n            const columns = res.data.boards[0].columns;\n            console.log(\"Columns: \", columns);\n            const cols = columns.map(column => {\n                return {label: column.title, value: column.id}\n            })\n            console.log(\"cols: \", cols)\n            setColOptions(cols)\n        }).catch((err) => {\n            console.log(\"Error fetching columns: \", err);\n        });\n        \n        \n\n        \n    }, [context])\n    \n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col\">\n                    <h4>Enter Batches</h4>\n                </div>  \n                <div className=\"col\">\n                    <div className=\"row\">\n                        {/* <div className=\"col\">\n                            <h4>Total</h4>\n                        </div> */}\n                        <div className=\"col\">\n                        <Label text={totalCount}></Label>\n                        </div>\n                    </div>\n                    \n                    \n                </div>\n                <div className=\"col\">\n                    <Dropdown placeholder=\"Target column\" onChange={dropdownHandler} options={colOptions}></Dropdown>\n                </div>\n            </div>\n            <div className=\"row pt-4\">\n                <div className=\"col\">\n                    <TextField onChange={nameHandler} type=\"text\" placeholder=\"Batch name\" />\n                </div>\n                <div className=\"col\">\n                    <TextField onChange={countHandler} type=\"number\" placeholder=\"Batch count\" />  \n                </div>\n                <div className=\"col\">\n                    <Button onClick={clickFunction} size={Button.sizes.SMALL} color={Button.colors.POSITIVE}>Add</Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ListInput"],"mappings":"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"},"metadata":{},"sourceType":"module"}