{"ast":null,"code":"import _slicedToArray from\"/home/nenwam/Documents/rallyessentials/batchtask/quickstart-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{TextField,Button,Label,Dropdown}from\"monday-ui-react-core\";import mondaySdk from\"monday-sdk-js\";import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var monday=mondaySdk();monday.setToken(\"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI3Mjk5MDQ5NiwiYWFpIjoxMSwidWlkIjozNjI5NTI0NywiaWFkIjoiMjAyMy0wOC0wM1QyMToyMjozNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTI3MTA0ODYsInJnbiI6InVzZTEifQ.XIrSWOWgg3U7oRd9zrKzL0WAr8Peo5b4ZIU1vfw0T2w\");var ListInput=function ListInput(_ref){var nameHandler=_ref.nameHandler,nameValue=_ref.nameValue,countHandler=_ref.countHandler,countValue=_ref.countValue,totalCount=_ref.totalCount,dropdownHandler=_ref.dropdownHandler,clickFunction=_ref.clickFunction;var _useState=useState(),_useState2=_slicedToArray(_useState,2),context=_useState2[0],setContext=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('colOptions'))||[]),_useState4=_slicedToArray(_useState3,2),colOptions=_useState4[0],setColOptions=_useState4[1];useEffect(function(){localStorage.setItem('colOptions',JSON.stringify(colOptions));},[colOptions]);useEffect(function(){var contextUnsubscribe=monday.listen(\"context\",function(res){setContext(res.data);});// Clean up the subscription when the component unmounts\nreturn function(){contextUnsubscribe&&contextUnsubscribe.unsubscribe();};},[]);useEffect(function(){// setColOptions(() => {\n//     console.log(context)\n//     console.log(\"Context: \", context)\n//     const boardId = context.boardId;\n//     const query = `query {\n//     boards(ids: ${boardId}) {\n//         columns {\n//         id\n//         title\n//         }\n//     }\n//     }`;\n//     monday.api(query).then((res) => {\n//         console.log(\"res: \", res);\n//         const columns = res.data.boards[0].columns;\n//         console.log(\"Columns: \", columns);\n//         const cols = columns.map(column => {\n//             return {label: column.title, value: column.id}\n//         })\n//         console.log(\"cols: \", cols)\n//         return cols\n//     }).catch((err) => {\n//         console.log(\"Error fetching columns: \", err);\n//     });\n// })\nif(!context)return;console.log(context);console.log(\"Context: \",context);var boardId=context.boardId;var query=\"query {\\n        boards(ids: \".concat(boardId,\") {\\n            columns {\\n            id\\n            title\\n            }\\n        }\\n        }\");monday.api(query).then(function(res){console.log(\"res: \",res);var columns=res.data.boards[0].columns;console.log(\"Columns: \",columns);var cols=columns.map(function(column){return{label:column.title,value:column.id};});console.log(\"cols: \",cols);setColOptions(cols);}).catch(function(err){console.log(\"Error fetching columns: \",err);});},[context]);return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Enter Batches\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Label,{text:totalCount})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Dropdown,{placeholder:\"Target column\",onChange:dropdownHandler,options:colOptions})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row pt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{onChange:nameHandler,value:nameValue,type:\"text\",placeholder:\"Batch name\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(TextField,{onChange:countHandler,value:countValue,type:\"number\",placeholder:\"Batch count\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Button,{onClick:clickFunction,size:Button.sizes.SMALL,color:Button.colors.POSITIVE,children:\"Add\"})})]})]});};export default ListInput;","map":{"version":3,"names":["React","TextField","Button","Label","Dropdown","mondaySdk","useState","useEffect","jsx","_jsx","jsxs","_jsxs","monday","setToken","ListInput","_ref","nameHandler","nameValue","countHandler","countValue","totalCount","dropdownHandler","clickFunction","_useState","_useState2","_slicedToArray","context","setContext","_useState3","JSON","parse","localStorage","getItem","_useState4","colOptions","setColOptions","setItem","stringify","contextUnsubscribe","listen","res","data","unsubscribe","console","log","boardId","query","concat","api","then","columns","boards","cols","map","column","label","title","value","id","catch","err","className","children","text","placeholder","onChange","options","type","onClick","size","sizes","SMALL","color","colors","POSITIVE"],"sources":["/home/nenwam/Documents/rallyessentials/batchtask/quickstart-react/src/modules/ListInput.js"],"sourcesContent":["import React from \"react\";\nimport { TextField, Button, Label, Dropdown } from \"monday-ui-react-core\"\nimport mondaySdk from \"monday-sdk-js\";\nimport { useState, useEffect } from \"react\";\n\nconst monday = mondaySdk();\nmonday.setToken(\"eyJhbGciOiJIUzI1NiJ9.eyJ0aWQiOjI3Mjk5MDQ5NiwiYWFpIjoxMSwidWlkIjozNjI5NTI0NywiaWFkIjoiMjAyMy0wOC0wM1QyMToyMjozNy4wMDBaIiwicGVyIjoibWU6d3JpdGUiLCJhY3RpZCI6MTI3MTA0ODYsInJnbiI6InVzZTEifQ.XIrSWOWgg3U7oRd9zrKzL0WAr8Peo5b4ZIU1vfw0T2w\");\n\nconst ListInput = ({nameHandler, nameValue, countHandler, countValue, totalCount, dropdownHandler, clickFunction}) => {\n    const [context, setContext] = useState();\n    const [colOptions, setColOptions] = useState(JSON.parse(localStorage.getItem('colOptions')) || [])\n\n    useEffect(() => {\n        localStorage.setItem('colOptions', JSON.stringify(colOptions));\n      }, [colOptions]);\n\n    useEffect(() => {\n        const contextUnsubscribe = monday.listen(\"context\", (res) => {\n          setContext(res.data);\n        });\n      \n        // Clean up the subscription when the component unmounts\n        return () => {\n          contextUnsubscribe && contextUnsubscribe.unsubscribe();\n        };\n      }, []);\n\n    useEffect(() => {\n\n        // setColOptions(() => {\n        //     console.log(context)\n\n        //     console.log(\"Context: \", context)\n        //     const boardId = context.boardId;\n            \n        //     const query = `query {\n        //     boards(ids: ${boardId}) {\n        //         columns {\n        //         id\n        //         title\n        //         }\n        //     }\n        //     }`;\n        //     monday.api(query).then((res) => {\n        //         console.log(\"res: \", res);\n        //         const columns = res.data.boards[0].columns;\n        //         console.log(\"Columns: \", columns);\n        //         const cols = columns.map(column => {\n        //             return {label: column.title, value: column.id}\n        //         })\n        //         console.log(\"cols: \", cols)\n        //         return cols\n        //     }).catch((err) => {\n        //         console.log(\"Error fetching columns: \", err);\n        //     });\n        // })\n\n        if (!context) return;\n\n\n        console.log(context)\n\n        console.log(\"Context: \", context)\n        const boardId = context.boardId;\n        \n        const query = `query {\n        boards(ids: ${boardId}) {\n            columns {\n            id\n            title\n            }\n        }\n        }`;\n        monday.api(query).then((res) => {\n            console.log(\"res: \", res);\n            const columns = res.data.boards[0].columns;\n            console.log(\"Columns: \", columns);\n            const cols = columns.map(column => {\n                return {label: column.title, value: column.id}\n            })\n            console.log(\"cols: \", cols)\n            setColOptions(cols)\n        }).catch((err) => {\n            console.log(\"Error fetching columns: \", err);\n        });\n        \n        \n\n        \n    }, [context])\n\n    return (\n        <div className=\"container\">\n            <div className=\"row\">\n                <div className=\"col\">\n                    <h4>Enter Batches</h4>\n                </div>  \n                <div className=\"col\">\n                    <div className=\"row\">\n                        {/* <div className=\"col\">\n                            <h4>Total</h4>\n                        </div> */}\n                        <div className=\"col\">\n                        <Label text={totalCount}></Label>\n                        </div>\n                    </div>\n                    \n                    \n                </div>\n                <div className=\"col\">\n                    <Dropdown placeholder=\"Target column\" onChange={dropdownHandler} options={colOptions}></Dropdown>\n                </div>\n            </div>\n            <div className=\"row pt-4\">\n                <div className=\"col\">\n                    <TextField onChange={nameHandler} value={nameValue} type=\"text\" placeholder=\"Batch name\" />\n                </div>\n                <div className=\"col\">\n                    <TextField onChange={countHandler} value={countValue} type=\"number\" placeholder=\"Batch count\" />  \n                </div>\n                <div className=\"col\">\n                    <Button onClick={clickFunction} size={Button.sizes.SMALL} color={Button.colors.POSITIVE}>Add</Button>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default ListInput"],"mappings":"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"},"metadata":{},"sourceType":"module"}